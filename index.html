<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversion & Discount Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
        }
        
        .dashboard {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .card {
            background: white;
            border: 1px solid #ccc;
            padding: 20px;
            flex: 1;
            min-width: 300px;
        }
        
        .card.full-width {
            flex-basis: 100%;
        }
        
        .card h2 {
            color: #555;
            border-bottom: 2px solid #555;
            padding-bottom: 10px;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            font-size: 14px;
        }
        
        .result {
            background: #f9f9f9;
            padding: 10px;
            margin-top: 10px;
            border-left: 3px solid #555;
        }
        
        .result-label {
            font-size: 12px;
            color: #666;
        }
        
        .result-value {
            font-size: 18px;
            font-weight: bold;
            color: #000;
        }
        
        .discount-table {
            width: 100%;
            margin: 15px 0;
            border-collapse: collapse;
        }
        
        .discount-table th,
        .discount-table td {
            padding: 8px;
            text-align: left;
            border: 1px solid #ddd;
        }
        
        .discount-table th {
            background: #555;
            color: white;
        }
        
        .calculation-breakdown {
            background: #e8f4f8;
            padding: 15px;
            margin-top: 15px;
        }
        
        .calculation-breakdown div {
            margin: 5px 0;
        }
        
        .grid-3 {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .grid-3 > div {
            flex: 1;
            min-width: 180px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Conversion & Discount Calculator</h1>
        
        <div class="dashboard">
            <div class="card">
                <h2>Decimal to Fraction</h2>
                <div class="input-group">
                    <label for="decimalInput">Enter Decimal:</label>
                    <input type="text" id="decimalInput" placeholder="e.g., 0.75 or 2.5">
                </div>
                <div class="result">
                    <div class="result-label">Fraction Result:</div>
                    <div class="result-value" id="fractionResult">-</div>
                </div>
            </div>
            
            <div class="card">
                <h2>Fraction to Decimal</h2>
                <div class="input-group">
                    <label for="fractionInput">Enter Fraction:</label>
                    <input type="text" id="fractionInput" placeholder="e.g., 3/4 or 1 1/2">
                </div>
                <div class="result">
                    <div class="result-label">Decimal Result:</div>
                    <div class="result-value" id="decimalResult">-</div>
                </div>
            </div>
            
            <div class="card full-width">
                <h2>Discount Calculator</h2>
                
                <div class="grid-3">
                    <div class="input-group">
                        <label for="discountCode">Discount Code:</label>
                        <select id="discountCode">
                            <option value="">Select Code</option>
                            <option value="AP">AP - 50%</option>
                            <option value="BQ">BQ - 45%</option>
                            <option value="CR">CR - 40%</option>
                            <option value="DS">DS - 35%</option>
                            <option value="ET">ET - 30%</option>
                            <option value="FU">FU - 25%</option>
                            <option value="GV">GV - 20%</option>
                            <option value="HW">HW - 15%</option>
                            <option value="IX">IX - 10%</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="originalAmount">Original Amount:</label>
                        <input type="number" id="originalAmount" placeholder="Enter amount" step="0.01">
                    </div>
                    
                    <div class="input-group">
                        <label for="additionalDiscount">Additional Discount (%):</label>
                        <input type="number" id="additionalDiscount" placeholder="Optional" step="0.01" value="0">
                    </div>
                </div>
                
                <div class="calculation-breakdown" id="calculationBreakdown">
                    <strong>Calculation Breakdown:</strong>
                    <div id="breakdownContent">Enter values to see calculation...</div>
                </div>
                
                <div class="grid-3" style="margin-top: 20px;">
                    <div class="result">
                        <div class="result-label">Net Multiple:</div>
                        <div class="result-value" id="netMultiple">-</div>
                    </div>
                    
                    <div class="result">
                        <div class="result-label">Total Discount:</div>
                        <div class="result-value" id="totalDiscount">-</div>
                    </div>
                    
                    <div class="result">
                        <div class="result-label">Final Amount:</div>
                        <div class="result-value" id="finalAmount">-</div>
                    </div>
                </div>
                
                <details style="margin-top: 20px;">
                    <summary style="cursor: pointer; font-weight: bold;">View Discount Code Reference</summary>
                    <table class="discount-table">
                        <thead>
                            <tr>
                                <th>Code</th>
                                <th>Discount %</th>
                                <th>Net Multiple</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>AP</td><td>50%</td><td>0.50</td></tr>
                            <tr><td>BQ</td><td>45%</td><td>0.55</td></tr>
                            <tr><td>CR</td><td>40%</td><td>0.60</td></tr>
                            <tr><td>DS</td><td>35%</td><td>0.65</td></tr>
                            <tr><td>ET</td><td>30%</td><td>0.70</td></tr>
                            <tr><td>FU</td><td>25%</td><td>0.75</td></tr>
                            <tr><td>GV</td><td>20%</td><td>0.80</td></tr>
                            <tr><td>HW</td><td>15%</td><td>0.85</td></tr>
                            <tr><td>IX</td><td>10%</td><td>0.90</td></tr>
                        </tbody>
                    </table>
                </details>
            </div>
        </div>
    </div>
    
    <script>
        var discountCodes = {
            'AP': { discount: 50, multiple: 0.50 },
            'BQ': { discount: 45, multiple: 0.55 },
            'CR': { discount: 40, multiple: 0.60 },
            'DS': { discount: 35, multiple: 0.65 },
            'ET': { discount: 30, multiple: 0.70 },
            'FU': { discount: 25, multiple: 0.75 },
            'GV': { discount: 20, multiple: 0.80 },
            'HW': { discount: 15, multiple: 0.85 },
            'IX': { discount: 10, multiple: 0.90 }
        };
        
        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }
        
        function decimalToFraction(decimal) {
            if (isNaN(decimal) || decimal === '') return '-';
            
            var num = parseFloat(decimal);
            var sign = num < 0 ? '-' : '';
            var absNum = Math.abs(num);
            var wholePart = Math.floor(absNum);
            var decimalPart = absNum - wholePart;
            
            if (decimalPart === 0) {
                return sign + wholePart.toString();
            }
            
            var tolerance = 1e-6;
            var bestNumerator = 0;
            var bestDenominator = 1;
            var bestError = Math.abs(decimalPart);
            
            for (var den = 1; den <= 10000; den++) {
                var num = Math.round(decimalPart * den);
                var error = Math.abs(decimalPart - num / den);
                
                if (error < bestError) {
                    bestError = error;
                    bestNumerator = num;
                    bestDenominator = den;
                    
                    if (error < tolerance) break;
                }
            }
            
            var divisor = gcd(bestNumerator, bestDenominator);
            bestNumerator /= divisor;
            bestDenominator /= divisor;
            
            if (wholePart === 0) {
                return sign + bestNumerator + '/' + bestDenominator;
            } else {
                return sign + wholePart + '-' + bestNumerator + '/' + bestDenominator;
            }
        }
        
        function fractionToDecimal(fraction) {
            if (!fraction || fraction.trim() === '') return '-';
            
            fraction = fraction.trim();
            var wholePart = 0;
            var numerator = 0;
            var denominator = 1;
            
            if (fraction.includes(' ')) {
                var parts = fraction.split(' ');
                wholePart = parseFloat(parts[0]) || 0;
                fraction = parts[1];
            } else if (fraction.includes('-') && fraction.includes('/')) {
                var dashIndex = fraction.indexOf('-');
                var slashIndex = fraction.indexOf('/');
                if (dashIndex < slashIndex) {
                    wholePart = parseFloat(fraction.substring(0, dashIndex)) || 0;
                    fraction = fraction.substring(dashIndex + 1);
                }
            }
            
            if (fraction.includes('/')) {
                var parts = fraction.split('/');
                numerator = parseFloat(parts[0]) || 0;
                denominator = parseFloat(parts[1]) || 1;
            } else {
                return (parseFloat(fraction) || 0).toFixed(4);
            }
            
            if (denominator === 0) return 'Error: Division by zero';
            
            var result = wholePart + (numerator / denominator);
            return result.toFixed(4);
        }
        
        function calculateDiscount() {
            var code = document.getElementById('discountCode').value;
            var amount = parseFloat(document.getElementById('originalAmount').value);
            var additionalDiscount = parseFloat(document.getElementById('additionalDiscount').value) || 0;
            
            if (!code || isNaN(amount)) {
                document.getElementById('netMultiple').textContent = '-';
                document.getElementById('totalDiscount').textContent = '-';
                document.getElementById('finalAmount').textContent = '-';
                document.getElementById('breakdownContent').innerHTML = 'Enter values to see calculation...';
                return;
            }
            
            var codeData = discountCodes[code];
            var baseDiscount = codeData.discount;
            var baseMultiple = codeData.multiple;
            
            var finalMultiple = baseMultiple;
            var amountAfterBase = amount * baseMultiple;
            var totalDiscountPercent = baseDiscount;
            var finalAmountValue = amountAfterBase;
            
            if (additionalDiscount > 0) {
                var additionalMultiple = (100 - additionalDiscount) / 100;
                finalMultiple = baseMultiple * additionalMultiple;
                finalAmountValue = amountAfterBase * additionalMultiple;
                totalDiscountPercent = (1 - finalMultiple) * 100;
            }
            
            var totalDiscountAmount = amount - finalAmountValue;
            
            document.getElementById('netMultiple').textContent = finalMultiple.toFixed(4);
            document.getElementById('totalDiscount').textContent = totalDiscountPercent.toFixed(2) + '%';
            document.getElementById('finalAmount').textContent = '$' + finalAmountValue.toFixed(4);
            
            var breakdown = '<div><strong>Original Amount:</strong> $' + amount.toFixed(2) + '</div>';
            breakdown += '<div><strong>Base Discount (' + code + '):</strong> ' + baseDiscount + '% (Net Multiple: ' + baseMultiple + ')</div>';
            breakdown += '<div><strong>After Base Discount:</strong> $' + amountAfterBase.toFixed(2) + '</div>';
            
            if (additionalDiscount > 0) {
                breakdown += '<div><strong>Additional Discount:</strong> ' + additionalDiscount + '%</div>';
                breakdown += '<div><strong>Final Net Multiple:</strong> ' + finalMultiple.toFixed(4) + '</div>';
            }
            
            breakdown += '<div style="margin-top: 10px; padding-top: 10px; border-top: 2px solid #555;">';
            breakdown += '<strong>Total Discount Amount:</strong> $' + totalDiscountAmount.toFixed(2) + '</div>';
            
            document.getElementById('breakdownContent').innerHTML = breakdown;
        }
        
        document.getElementById('decimalInput').addEventListener('input', function(e) {
            document.getElementById('fractionResult').textContent = decimalToFraction(e.target.value);
        });
        
        document.getElementById('fractionInput').addEventListener('input', function(e) {
            document.getElementById('decimalResult').textContent = fractionToDecimal(e.target.value);
        });
        
        document.getElementById('discountCode').addEventListener('change', calculateDiscount);
        document.getElementById('originalAmount').addEventListener('input', calculateDiscount);
        document.getElementById('additionalDiscount').addEventListener('input', calculateDiscount);
    </script>
</body>
</html>